<!DOCTYPE html>
<meta charset="utf-8">

<!-- Load d3.js -->
<script src="https://d3js.org/d3.v6.js"></script>

<!-- Create a div where the graph will take place -->
<div id="my_dataviz"></div>

<script>
    var testData = {
    "nodes": [
      {
        "id": "Santiago\nPeña",
        "title": "Presidente",
        "height": 70,
        "fill": {
          "src": "https://insightcrime.org/wp-content/uploads/2023/06/SANTI-colorado-scaled.jpg"
        }
      },
      {
        "id": "Horacio\nCartes",
        "title": "Tutor",
        "height": 50,
        "fill": {
          "src": "https://insightcrime.org/wp-content/uploads/2023/06/Cartes.png"
        }
      },
      {
        "id": "Enrique\nRiera",
        "title": "Ministerio del interior",
        "height": 25,
        "fill": "#B70039" ,
        "relacion": "gabinete"     },
      {
        "id": "Juan Carlos\nBaruja",
        "title": "Ministro de Urbanismo,\nVivienda y Hábitat",
        "height": 25,
        "fill": "#B70039",
        "relacion": "gabinete"
      },
      {
        "id": "Ángel\nBarchini",
        "title": "ministro de Justicia",
        "height": 25,
        "fill": "#B70039",
        "relacion": "gabinete"
      },
      {
        "id": "Arturo\nLuglietto",
        "title": "narcotraficante",
        "height": 20,
        "fill": "#5FA69B"
      },
      {
        "id": "Ahmed\nHashem",
        "title": "narcotraficante",
        "height": 20,
        "fill": "#5FA69B"
      },
      {
        "id": "Óscar\nGonzález",
        "height": 25,
        "fill": "#B70039",
        "title": "ministro de Defensa Nacional",
        "relacion": "gabinete"
      },
      {
        "id": "Rubén Ramírez\nLezcano",
        "height": 25,
        "fill": "#B70039",
        "title": "ministro de Relaciones Exteriores",
        "relacion": "gabinete"
      },
      {
        "id": "Claudia\nCenturión",
        "height": 25,
        "fill": "#B70039",
        "title": "Ministerio de Obras Públicas y Comunicaciones (MOPC)",
        "relacion": "gabinete"
      },
      {
        "id": "Javier\nGiménez",
        "height": 25,
        "fill": "#B70039",
        "title": "Ministerio de Industria y Comercio",
        "relacion": "gabinete"
      },
      {
        "id": "Ramón\nJiménez Gaona",
        "height": 20,
        "fill": "#5FA69B",
        "title": "Indited Business Owner"
      },
      {
        "id": "Carlos Fernández\nValdovinos",
        "height": 25,
        "fill": "#B70039",
        "title": "Ministerio de Hacienda",
        "relacion": "gabinete"
      },
      {
        "id": "Felipe\nGonzález",
        "height": 25,
        "fill": "#B70039",
        "title": "Ministerio de Salud Pública y Bienestar Social",
        "relacion": "gabinete"
      },
      {
        "id": "Ramón\nGonzález Daher",
        "height": 20,
        "fill": "#5FA69B",
        "title": "Convicted Money Launderer"  
      },
      {
        "id": "Rolando\nde Barros",
        "height": 25,
        "fill": "#B70039",
        "title": "Ministerio del Ambiente y\nDesarrollo Sostenible",
        "relation": "gabinete"
      },
      {
        "id": "Luis\nRamírez",
        "height": 25,
        "fill": "#B70039",
        "title": "Ministerio de\nEducation y Ciencias",
        "relacion": "gabinete"
      },
      {
        "id": "Walter\nGutiérrez",
        "height": 25,
        "fill": "#B70039",
        "title": "Ministerio de la Niñez",
        "relacion": "gabinete"
      },
      {
        "id": "Mónica\nRecalbe",
        "height": 25,
        "fill": "#B70039",
        "title": "Ministerio del Trabajo, Empleo\ny Seguridad Social (MTESS)",
        "relacion": "gabinete"
      },
      {
        "id": "Gustavo\nVillate",
        "height": 25,
        "fill": "#B70039",
        "title": "Ministerio de Tecnologías de la\nInformación y Comunicación (MITIC)",
        "relacion": "gabinete"
      },
      {
        "id": "Tadeo\nRojas",
        "height": 25,
        "fill": "#B70039",
        "title": "Ministerio de\nDesarollo Social",
        "relacion": "gabinete"
      },
      {
        "id": "María Teresa\nBaran",
        "height": 25,
        "fill": "#B70039",
        "title": "Salud Pública y Bienestar\nSocial (MSPBS)",
        "relacion": "gabinete"
      }
    ],

    "edges": [
      { "from": "Santiago\nPeña", "to": "Óscar\nGonzález" },
      { "from": "Santiago\nPeña", "to": "Horacio\nCartes" },
      { "from": "Horacio\nCartes", "to": "Santiago\nPeña" },
      { "from": "Santiago\nPeña", "to": "Rubén Ramírez\nLezcano" },
      { "from": "Santiago\nPeña", "to": "Ángel\nBarchini" },
      { "from": "Santiago\nPeña", "to": "Juan Carlos\nBaruja" },
      { "from": "Horacio\nCartes", "to": "Juan Carlos\nBaruja" },
      { "from": "Santiago\nPeña", "to": "Enrique\nRiera" },
      { "from": "Santiago\nPeña", "to": "Óscar\nGonzález" },
      { "from": "Santiago\nPeña", "to": "Claudia\nCenturión" },
      { "from": "Santiago\nPeña", "to": "Javier\nGiménez" },
      { "from": "Horacio\nCartes", "to": "Enrique\nRiera" },
      { "from": "Horacio\nCartes", "to": "Ramón\nJiménez Gaona" },
      { "from": "Claudia\nCenturión", "to": "Ramón\nJiménez Gaona" },
      { "from": "Ángel\nBarchini", "to": "Arturo\nLuglietto" },
      { "from": "Ángel\nBarchini", "to": "Ahmed\nHashem" },
      { "from": "Santiago\nPeña", "to": "Carlos Fernández\nValdovinos" },
      { "from": "Santiago\nPeña", "to": "Felipe\nGonzález" },
      { "from": "Horacio\nCartes", "to": "Carlos Fernández\nValdovinos" },
      { "from": "Horacio\nCartes", "to": "Ramón\nGonzález Daher" },
      { "from": "Carlos Fernández\nValdovinos", "to": "Ramón\nGonzález Daher" },
      { "from": "Santiago\nPeña", "to": "Rolando\nde Barros" },
      { "from": "Horacio\nCartes", "to": "Rolando\nde Barros" },
      { "from": "Santiago\nPeña", "to": "Luis\nRamírez"},
      { "from": "Santiago\nPeña", "to": "Tadeo\nRojas" },
      { "from": "Santiago\nPeña", "to": "Walter\nGutiérrez" },
      { "from": "Santiago\nPeña", "to": "Mónica\nRecalbe" },
      { "from": "Santiago\nPeña", "to": "Gustavo\nVillate" },
      { "from": "Santiago\nPeña", "to": "María Teresa\nBaran" },
      { "from": "Horacio\nCartes", "to": "María Teresa\nBaran" },
    ]
  }
    // set the dimensions and margins of the graph
    const margin = {top: 10, right: 30, bottom: 30, left: 40},
      width = 400 - margin.left - margin.right,
      height = 400 - margin.top - margin.bottom;
    
    // append the svg object to the body of the page
    const svg = d3.select("#my_dataviz")
    .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform",
            `translate(${margin.left}, ${margin.top})`);
    
    //d3.json("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/data_network.json").then( function( data) {
    
      // Initialize the links
      const link = svg
        .selectAll("line")
        .data(testData.edges)
        //.data(data.links)
        .join("line")
          .style("stroke", "#aaa")
    
      // Initialize the nodes
      const node = svg
        .selectAll("circle")
        //.data(data.nodes)
        .data(testData.nodes)
        .join("circle")
          .attr("r", 20)
          .style("fill", "#69b3a2")
    
      // Let's list the force we wanna apply on the network
      const simulation = d3.forceSimulation(testData.nodes)                 // Force algorithm is applied to data.nodes
          .force("link", d3.forceLink()                               // This force provides links between nodes
                .id(function(d) { return d.id; })                     // This provide  the id of a node
                .links(testData.edges)                                    // and this the list of links
          )
          .force("charge", d3.forceManyBody().strength(-400))         // This adds repulsion between nodes. Play with the -400 for the repulsion strength
          .force("center", d3.forceCenter(width / 2, height / 2))     // This force attracts nodes to the center of the svg area
          .on("end", ticked);
    
      // This function is run at each iteration of the force algorithm, updating the nodes position.
      function ticked() {
        link
            .attr("x1", function(d) { return d.source.x; })
            .attr("y1", function(d) { return d.source.y; })
            .attr("x2", function(d) { return d.target.x; })
            .attr("y2", function(d) { return d.target.y; });
    
        node
             .attr("cx", function (d) { return d.x+6; })
             .attr("cy", function(d) { return d.y-6; });
      }
    
    //});
    </script>